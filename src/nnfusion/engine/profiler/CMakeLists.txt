# Microsoft (c) 2019, MSRA/NNFUSION team

set(ENGINE_PROFILER
    profiler.cpp
    cuda_runtime.cpp
    rocm_runtime.cpp
    cpu_runtime.cpp
    profiling_runtime.cpp
    binary_utils.cpp
)

add_library(nnfusion_engine_profiler STATIC
    ${ENGINE_PROFILER}
)

target_link_libraries(nnfusion_engine_profiler
    nnfusion_graph sqlite3
)

set_target_properties(nnfusion_engine_profiler PROPERTIES VERSION ${NGRAPH_VERSION})
target_include_directories(nnfusion_engine_profiler SYSTEM PUBLIC
    ${NGRAPH_INCLUDE_PATH}
)
target_compile_options(nnfusion_engine_profiler PRIVATE "-fPIC")